"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _dateformat = _interopRequireDefault(require("dateformat"));

var _chalk = _interopRequireDefault(require("chalk"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class StringBuilder {
  constructor(config) {
    _defineProperty(this, "config", void 0);

    _defineProperty(this, "printQueue", void 0);

    _defineProperty(this, "filteredHeaderList", void 0);

    this.config = config;
    this.printQueue = [];
    this.filteredHeaderList = ['common', 'delete', 'get', 'head', 'post', 'put', 'patch', 'content-type', 'content-length', 'vary', 'date', 'connection', 'content-security-policy'];
  }

  makeLogTypeWithPrefix(logType) {
    const prefix = this.config.prefixText === false ? `[${logType}]` : `[${this.config.prefixText || 'Axios'}][${logType}]`;
    this.printQueue.push(_chalk.default.green(prefix));
    return this;
  }

  makeDateFormat(date) {
    // allow for opting-out of adding the timestamp (as most loggers already add this)
    if (this.config.dateFormat !== false) {
      // @ts-ignore
      const dateFormat = (0, _dateformat.default)(date, this.config.dateFormat || 'isoDateTime');
      this.printQueue.push(dateFormat);
    }

    return this;
  }

  makeHeader(headers) {
    if (this.config.headers && headers) {
      const headerMap = {};

      for (let key in headers) {
        if (!this.filteredHeaderList.includes(key)) {
          headerMap[key] = headers[key];
        }
      }

      this.printQueue.push(JSON.stringify(headerMap));
    }

    return this;
  }

  makeUrl(url, baseUrl) {
    if (this.config.url && url) {
      if (baseUrl) url = this.combineURLs(baseUrl, url);
      this.printQueue.push(url);
    }

    return this;
  }

  makeParams(params) {
    if (this.config.params && params) this.printQueue.push(JSON.stringify(params));
    return this;
  }

  makeMethod(method) {
    if (this.config.method && method) this.printQueue.push(_chalk.default.yellow(method.toUpperCase()));
    return this;
  }

  makeData(data) {
    const str = typeof data === `string` ? data : JSON.stringify(data);
    if (this.config.data && data) this.printQueue.push(str);
    return this;
  }

  makeStatus(status, statusText) {
    if (this.config.status && this.config.statusText && status && statusText) this.printQueue.push(`${status}:${statusText}`);else if (this.config.status && status) this.printQueue.push(`${status}`);else if (this.config.statusText && statusText) this.printQueue.push(statusText);
    return this;
  }

  build() {
    return this.printQueue.join(' ');
  }
  /**
   * Helper imported from Axios library
   * @see https://github.com/axios/axios/blob/d99d5faac29899eba68ce671e6b3cbc9832e9ad8/lib/helpers/combineURLs.js
   * */


  combineURLs(baseURL, relativeURL) {
    return relativeURL ? baseURL.replace(/\/+$/, '') + '/' + relativeURL.replace(/^\/+/, '') : baseURL;
  }

}

var _default = StringBuilder;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vc3RyaW5nLWJ1aWxkZXIudHMiXSwibmFtZXMiOlsiU3RyaW5nQnVpbGRlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwicHJpbnRRdWV1ZSIsImZpbHRlcmVkSGVhZGVyTGlzdCIsIm1ha2VMb2dUeXBlV2l0aFByZWZpeCIsImxvZ1R5cGUiLCJwcmVmaXgiLCJwcmVmaXhUZXh0IiwicHVzaCIsImNoYWxrIiwiZ3JlZW4iLCJtYWtlRGF0ZUZvcm1hdCIsImRhdGUiLCJkYXRlRm9ybWF0IiwibWFrZUhlYWRlciIsImhlYWRlcnMiLCJoZWFkZXJNYXAiLCJrZXkiLCJpbmNsdWRlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYWtlVXJsIiwidXJsIiwiYmFzZVVybCIsImNvbWJpbmVVUkxzIiwibWFrZVBhcmFtcyIsInBhcmFtcyIsIm1ha2VNZXRob2QiLCJtZXRob2QiLCJ5ZWxsb3ciLCJ0b1VwcGVyQ2FzZSIsIm1ha2VEYXRhIiwiZGF0YSIsInN0ciIsIm1ha2VTdGF0dXMiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiYnVpbGQiLCJqb2luIiwiYmFzZVVSTCIsInJlbGF0aXZlVVJMIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOzs7Ozs7QUFFQSxNQUFNQSxhQUFOLENBQW9CO0FBS2hCQyxFQUFBQSxXQUFXLENBQUNDLE1BQUQsRUFBMEI7QUFBQTs7QUFBQTs7QUFBQTs7QUFDakMsU0FBS0EsTUFBTCxHQUFjQSxNQUFkO0FBQ0EsU0FBS0MsVUFBTCxHQUFrQixFQUFsQjtBQUNBLFNBQUtDLGtCQUFMLEdBQTBCLENBQUMsUUFBRCxFQUFXLFFBQVgsRUFBcUIsS0FBckIsRUFBNEIsTUFBNUIsRUFBb0MsTUFBcEMsRUFBNEMsS0FBNUMsRUFBbUQsT0FBbkQsRUFBNEQsY0FBNUQsRUFBNEUsZ0JBQTVFLEVBQThGLE1BQTlGLEVBQXNHLE1BQXRHLEVBQThHLFlBQTlHLEVBQTRILHlCQUE1SCxDQUExQjtBQUNI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QUFHLEtBQUtuQyxNQUFMLENBQVlrQyxNQUFaLElBQXNCLEtBQUtsQyxNQUFMLENBQVltQyxVQUFsQyxJQUFnREQsTUFBaEQsSUFBMERDLFVBQTdELEVBQXlFLEtBQUtsQyxVQUFMLENBQWdCTSxJQUFoQixDQUFzQixHQUFFMkIsTUFBTyxJQUFHQyxVQUFXLEVBQTdDLEVBQXpFLEtBQ0ssSUFBRyxLQUFLbkMsTUFBTCxDQUFZa0MsTUFBWixJQUFzQkEsTUFBekIsRUFBaUMsS0FBS2pDLFVBQUwsQ0FBZ0JNLElBQWhCLENBQXNCLEdBQUUyQixNQUFPLEVBQS9CLEVBQWpDLEtBQ0EsSUFBRyxLQUFLbEMsTUFBTCxDQUFZbUMsVUFBWixJQUEwQkEsVUFBN0IsRUFBeUMsS0FBS2xDLFVBQUwsQ0FBZ0JNLElBQWhCLENBQXFCNEIsVUFBckI7QUFDOUMsV0FBTyxJQUFQO0FBQ0g7O0FBRURDLEVBQUFBLEtBQUssR0FBRztBQUNKLFdBQU8sS0FBS25DLFVBQUwsQ0FBZ0JvQyxJQUFoQixDQUFxQixHQUFyQixDQUFQO0FBQ0g7QUFFRDtBQUNKO0FBQ0E7QUFDQTs7O0FBQ0lkLEVBQUFBLFdBQVcsQ0FBQ2UsT0FBRCxFQUFrQkMsV0FBbEIsRUFBZ0Q7QUFDdkQsV0FBT0EsV0FBVyxHQUNaRCxPQUFPLENBQUNFLE9BQVIsQ0FBZ0IsTUFBaEIsRUFBd0IsRUFBeEIsSUFBOEIsR0FBOUIsR0FBb0NELFdBQVcsQ0FBQ0MsT0FBWixDQUFvQixNQUFwQixFQUE0QixFQUE1QixDQUR4QixHQUVaRixPQUZOO0FBR0g7O0FBcEZlOztlQXVGTHhDLGEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGF0ZWZvcm1hdCBmcm9tICdkYXRlZm9ybWF0JztcbmltcG9ydCB7IEdsb2JhbExvZ0NvbmZpZyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcblxuY2xhc3MgU3RyaW5nQnVpbGRlciB7XG4gICAgcHJpdmF0ZSBjb25maWc6IEdsb2JhbExvZ0NvbmZpZztcbiAgICBwcml2YXRlIHByaW50UXVldWU6IEFycmF5PHN0cmluZz47XG4gICAgcHJpdmF0ZSBmaWx0ZXJlZEhlYWRlckxpc3Q6IEFycmF5PFN0cmluZz47XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IEdsb2JhbExvZ0NvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5wcmludFF1ZXVlID0gW107XG4gICAgICAgIHRoaXMuZmlsdGVyZWRIZWFkZXJMaXN0ID0gWydjb21tb24nLCAnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbnRlbnQtdHlwZScsICdjb250ZW50LWxlbmd0aCcsICd2YXJ5JywgJ2RhdGUnLCAnY29ubmVjdGlvbicsICdjb250ZW50LXNlY3VyaXR5LXBvbGljeSddO1xuICAgIH1cblxuICAgIG1ha2VMb2dUeXBlV2l0aFByZWZpeChsb2dUeXBlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gdGhpcy5jb25maWcucHJlZml4VGV4dCA9PT0gZmFsc2UgPyBgWyR7bG9nVHlwZX1dYCA6IGBbJHt0aGlzLmNvbmZpZy5wcmVmaXhUZXh0IHx8ICdBeGlvcyd9XVske2xvZ1R5cGV9XWA7XG4gICAgICAgIHRoaXMucHJpbnRRdWV1ZS5wdXNoKGNoYWxrLmdyZWVuKHByZWZpeCkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBtYWtlRGF0ZUZvcm1hdChkYXRlOiBEYXRlKSB7XG4gICAgICAgIC8vIGFsbG93IGZvciBvcHRpbmctb3V0IG9mIGFkZGluZyB0aGUgdGltZXN0YW1wIChhcyBtb3N0IGxvZ2dlcnMgYWxyZWFkeSBhZGQgdGhpcylcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmRhdGVGb3JtYXQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25zdCBkYXRlRm9ybWF0ID0gZGF0ZWZvcm1hdChkYXRlLCB0aGlzLmNvbmZpZy5kYXRlRm9ybWF0IHx8ICdpc29EYXRlVGltZScpO1xuICAgICAgICAgICAgdGhpcy5wcmludFF1ZXVlLnB1c2goZGF0ZUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbWFrZUhlYWRlcihoZWFkZXJzPzogeyBba2V5OnN0cmluZ10gOiB7dmFsdWU6c3RyaW5nfX0pIHtcbiAgICAgICAgaWYodGhpcy5jb25maWcuaGVhZGVycyAmJiBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJNYXA6eyBba2V5OnN0cmluZ10gOiB7dmFsdWU6c3RyaW5nfX0gPSB7fTtcbiAgICAgICAgICAgIGZvcihsZXQga2V5IGluIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZighdGhpcy5maWx0ZXJlZEhlYWRlckxpc3QuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJNYXBba2V5XSA9IGhlYWRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHJpbnRRdWV1ZS5wdXNoKEpTT04uc3RyaW5naWZ5KGhlYWRlck1hcCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIG1ha2VVcmwodXJsPzogc3RyaW5nLCBiYXNlVXJsPzogc3RyaW5nKSB7XG4gICAgICAgIGlmKHRoaXMuY29uZmlnLnVybCAmJiB1cmwpIHtcbiAgICAgICAgICAgIGlmKGJhc2VVcmwpIHVybCA9IHRoaXMuY29tYmluZVVSTHMoYmFzZVVybCwgdXJsKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRRdWV1ZS5wdXNoKHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbWFrZVBhcmFtcyhwYXJhbXM/OiBvYmplY3QpIHtcbiAgICAgICAgaWYodGhpcy5jb25maWcucGFyYW1zICYmIHBhcmFtcykgdGhpcy5wcmludFF1ZXVlLnB1c2goSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIG1ha2VNZXRob2QobWV0aG9kPzogc3RyaW5nKSB7XG4gICAgICAgIGlmKHRoaXMuY29uZmlnLm1ldGhvZCAmJiBtZXRob2QpIHRoaXMucHJpbnRRdWV1ZS5wdXNoKGNoYWxrLnllbGxvdyhtZXRob2QudG9VcHBlckNhc2UoKSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBtYWtlRGF0YShkYXRhOiBvYmplY3QpIHtcbiAgICAgICAgY29uc3Qgc3RyID0gdHlwZW9mIGRhdGEgPT09IGBzdHJpbmdgID8gZGF0YSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICBpZih0aGlzLmNvbmZpZy5kYXRhICYmIGRhdGEpIHRoaXMucHJpbnRRdWV1ZS5wdXNoKHN0cik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIG1ha2VTdGF0dXMoc3RhdHVzPzogbnVtYmVyLCBzdGF0dXNUZXh0Pzogc3RyaW5nKSB7XG4gICAgICAgIGlmKHRoaXMuY29uZmlnLnN0YXR1cyAmJiB0aGlzLmNvbmZpZy5zdGF0dXNUZXh0ICYmIHN0YXR1cyAmJiBzdGF0dXNUZXh0KSB0aGlzLnByaW50UXVldWUucHVzaChgJHtzdGF0dXN9OiR7c3RhdHVzVGV4dH1gKTtcbiAgICAgICAgZWxzZSBpZih0aGlzLmNvbmZpZy5zdGF0dXMgJiYgc3RhdHVzKSB0aGlzLnByaW50UXVldWUucHVzaChgJHtzdGF0dXN9YCk7XG4gICAgICAgIGVsc2UgaWYodGhpcy5jb25maWcuc3RhdHVzVGV4dCAmJiBzdGF0dXNUZXh0KSB0aGlzLnByaW50UXVldWUucHVzaChzdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgYnVpbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW50UXVldWUuam9pbignICcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBpbXBvcnRlZCBmcm9tIEF4aW9zIGxpYnJhcnlcbiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGlvcy9heGlvcy9ibG9iL2Q5OWQ1ZmFhYzI5ODk5ZWJhNjhjZTY3MWU2YjNjYmM5ODMyZTlhZDgvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanNcbiAgICAgKiAqL1xuICAgIGNvbWJpbmVVUkxzKGJhc2VVUkw6IHN0cmluZywgcmVsYXRpdmVVUkw/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICAgICAgICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgICAgICAgICA6IGJhc2VVUkw7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RyaW5nQnVpbGRlcjtcbiJdfQ==